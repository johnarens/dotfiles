var KEY_UP=38,KEY_DOWN=40,KEY_ESC=27,KEY_ENTER=13;
$(document).ready(function(){function n(j){function g(){a.find(".content").text()==""?a.removeClass("inputed focused"):a.removeClass("focused");k.val("").trigger("input");c.scrollTop(0);h.show();i.hide()}function l(){a.find(".menu-item:visible").removeClass("selected").eq(d).addClass("selected");var b=a.find(".menu-item:visible").eq(d),e=b.offset().top+c.scrollTop()-c.offset().top;b=b.outerHeight();if(e+b>c.outerHeight()+c.scrollTop())c.scrollTop(e+b-c.outerHeight());else e<c.scrollTop()&&c.scrollTop(e)}
function m(){d=-1;a.find(".menu-item").removeClass("selected")}var a=$(j),f=a.find(".content"),k=a.find(".search-box input"),h=a.find(".search-box"),c=a.find(".item-container"),i=a.find(".add-box"),o=a.find(".remove-select"),d=-1;a.on("click",".menu-item",function(){f.text($(this).text()).attr("data-id",$(this).attr("data-id"));g()}).on("mouseenter",".menu-item",function(){$(this).addClass("selected").siblings().removeClass("selected")});o.on("click",function(b){b.stopPropagation();a.removeClass("inputed focused");
f.text("").attr("data-id","")});c.on("mouseleave",function(){m()});f.on("click",function(){a.addClass("inputed focused")});a.find(".add-btn").on("click",function(){h.hide();i.show().find("input").focus()});a.find(".cancel").on("click",function(){h.show();i.hide()});k.on("input",function(){var b=$(this).val();a.find(".menu-item").each(function(){$(this).text().toLowerCase().indexOf(b.toLowerCase())==-1?$(this).hide():$(this).show();m()})}).on("keydown",function(b){switch(b.keyCode){case KEY_UP:if(d==
-1)d=a.find(".menu-item:visible").length;d--;l();break;case KEY_DOWN:if(d==a.find(".menu-item:visible").length-1)d=-1;d++;l();break;case KEY_ENTER:b.stopPropagation();b=a.find(".menu-item.selected");f.text(b.text()).attr("data-id",b.attr("data-id"));g();break;case KEY_ESC:break}});$(document).on("click",function(b){$.contains(j,b.target)||g()})}$(".form-input").find("input").on("focus",function(){$(this).parent().addClass("inputed focused")}).on("blur",function(){$(this).val()===""&&$(this).parent().removeClass("inputed");
$(this).parent().removeClass("focused")}).on("change",function(){$(this).val()!==""&&$(this).parent().addClass("inputed")});$(".form-textarea").find("textarea").on("focus",function(){$(this).parent().addClass("inputed focused")}).on("blur",function(){$(this).val()===""&&$(this).parent().removeClass("inputed");$(this).parent().removeClass("focused")}).on("change",function(){$(this).text()!==""&&$(this).parent().addClass("inputed")});$(".form-select").each(function(){n(this)})});
